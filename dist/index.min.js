!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((n=n||self).BezierCurve={})}(this,(function(n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r(){for(var n=0,r=0,t=arguments.length;t>r;r++)n+=arguments[r].length;var e=Array(n),u=0;for(r=0;t>r;r++)for(var i=arguments[r],o=0,a=i.length;a>o;o++,u++)e[u]=i[o];return e}function t(n,r,t,e){var u=new Map([]);return function(i){if(u.has(i))return u.get(i);var o=1-i,a=Math.pow(o,3),f=Math.pow(o,2),c=Math.pow(i,3),l=Math.pow(i,2),v=[n[0]*a+3*r[0]*i*f+3*t[0]*l*o+e[0]*c,n[1]*a+3*r[1]*i*f+3*t[1]*l*o+e[1]*c];return u.set(i,v),v}}function e(n){var e=function(n){return n.slice(1)}(n),u=function(n){return n[0]}(n);return e.map((function(n,i){return t.apply(void 0,r([0===i?u:e[i-1][2]],n))}))}function u(n,r){return n.map((function(n,t){var e=1/(r[t]-1);return Array(r[t]).fill(0).map((function(r,t){return n(t*e)}))}))}function i(n){return Array(n.length-1).fill(0).map((function(r,t){return i=(e=n[t])[1],o=(u=n[t+1])[1],Math.sqrt(Math.pow(e[0]-u[0],2)+Math.pow(i-o,2));var e,u,i,o}))}function o(n){return n.reduce((function(n,r){return n+r}),0)}function a(n){var r=function(n){return n.map(i)}(n),t=o(r.map((function(n){return n.length}))),e=r.map(o),u=o(e),a=u/t;return{totalLength:u,segmentLength:e,avgDistance:a,deviation:function(n,r){return o(n.map((function(n){return n.map((function(n){return Math.abs(n-r)}))})).map(o))}(r,a)}}function f(n){return n.reduce((function(n,t){return r(n,t)}),[])}function c(n){return f(n).length}function l(n,r,t,e){void 0===e&&(e=0);var o=a(n);return o.deviation>t?(n=function(n,r,t){var e=t.avgDistance,u=1/c(n)/10;return r.forEach((function(r,t){for(var o=n[t].length,a=1/(o-1),f=Array(o).fill(0).map((function(n,r){return r*a})),c=0;10>c;c++)for(var l=i(n[t]).map((function(n){return n-e})),v=0,p=0;o>p;p++){if(0===p)return;f[p]-=u*(v+=l[p-1]),f[p]>1&&(f[p]=1),0>f[p]&&(f[p]=0),n[t][p]=r(f[p])}})),n}(n=function(n,r,t,e){var i=t.avgDistance,o=t.totalLength,a=t.segmentLength,f=c(n);return f=Math.ceil(i/e*f*1.1),u(r,a.map((function(n){return Math.ceil(n/o*f)})))}(n,r,o,t),r,o=a(n)),e++>10?f(n):l(n,r,t,e)):f(n)}function v(n,r){void 0===r&&(r=5);var t=e(n),i=l(function(n){return u(n,Array(n.length).fill(50))}(t),t,r),o=function(n){return n.slice(-1)[2]}(n);return i.push(o),i}function p(n,r){return void 0===r&&(r=5),n&&n instanceof Array&&n.length>1?"number"!=typeof r?null:v(n,r):null}function h(n,r){void 0===r&&(r=5);var t=p(n,r);return t?null:o(i(t))}function g(n,r){var t=r[0],e=r[1];return[t+(t-n[0]),e+(e-n[1])]}function d(n,t,e,u){if(void 0===t&&(t=!1),void 0===e&&(e=.25),void 0===u&&(u=.25),!(n instanceof Array))return null;if(2>=n.length)return null;var i=n[0],o=Array(n.length-1).fill(0).map((function(i,o){return r(function(n,r,t,e,u){void 0===t&&(t=!1),void 0===e&&(e=.25),void 0===u&&(u=.25);var i=n.length;if(3>i||r>=i)return null;var o=r-1;0>o&&(o=t?i+o:0);var a=r+1;i>a||(a=t?a-i:i-1);var f=r+2;i>f||(f=t?f-i:i-1);var c=n[o],l=n[r],v=n[a],p=n[f];return[[l[0]+e*(v[0]-c[0]),l[1]+e*(v[1]-c[1])],[v[0]-u*(p[0]-l[0]),v[1]-u*(p[1]-l[1])]]}(n,o,t,e,u),[n[o+1]])}));return t&&function(n,r){var t=n[0],e=n.slice(-1)[0];n.push([g(e[1],e[2]),g(t[0],r),r])}(o,i),o.unshift(n[0]),o}var s={bezierCurveToPolyline:p,getBezierCurveLength:h,polylineToBezierCurve:d};n.bezierCurveToPolyline=p,n.default=s,n.getBezierCurveLength=h,n.polylineToBezierCurve=d,Object.defineProperty(n,"__esModule",{value:!0})}));
